How to set up Tor with obfsproxy
================================

        Instructions:

       "I AM A CENSORED FELLOW"

[1] You will need:

* a copy of obfsproxy:
  git clone git://git.torproject.org/obfsproxy.git
  Building it should be easy, just do "./configure && make".

* a copy of Tor that supports the Socks5Proxy option.
  Tor 0.2.2.30 - for example - will work.

[2] Set up obfsproxy:

This command will setup an obfsproxy client speaking the obfs2
protocol on localhost:1050:

./obfsproxy obfs2 socks 127.0.0.1:1050

[3] Set up tor:

You should put in your torrc file:
---
SocksPort 5000
UseBridges 1
Bridge <bridge address>:1051 # This is provided by the bridge operator.
Socks5Proxy 127.0.0.1:1050 # This points to the obfsproxy client.
---

Of course you should substitute the value of the Bridge line above,
with the information provided to you by a bridge operator.

[4] Done!

Alright, you are done!
Make sure you have followed the above steps on the correct order:
First launch obfsproxy and then launch tor.

Now to test it, launch Firefox and set it up to use a Socks server on
127.0.0.1:5000. Now browse the web.


        "I AM A BRIDGE OPERATOR THAT WANTS TO HELP CENSORED PEOPLE"

[1] You will need:

* a copy of obfsproxy:
  git clone git://git.torproject.org/obfsproxy.git
  Building it should be easy, just do "./configure && make".

* a copy of Tor which can function as a Tor bridge.

[2] Set up obfsproxy:

This command will setup an obfsproxy server speaking the obfs2
protocol on localhost:1051:

./obfsproxy obfs2 --dest 127.0.0.1:5001 server 127.0.0.1:1051

Be sure to pass the value of ORPort of your bridge relay to the --dest
argument (see next section).

[3] Set up tor:

You should put in your torrc file:
---
ORPort 5001 # Port on which bridge will be listening on.
BridgeRelay 1
ExitPolicy reject *:*
---

[4] Done!

Make sure you have followed the above steps on the correct order.
First launch obfsproxy and then launch tor.
You can use any port numbers you want, just be sure to adjust the
torrc and obfsproxy commands accordingly.

Don't forget that You might need to set up port forwarding.

Now you should tell censored people to connect to your IP on port 1051.
So, for example, if your bridge's address is 85.22.13.1, bridge users
should connect to 85.22.13.1:1051.
Pay attention that '1051' is the port where obfsproxy is listening on,
and *not* your bridge's ORPort.

        Network diagram of the above setup:

(If you don't understand this drawing, just ignore this section.)

              1050                                1051
          +-----------+                      +------------+
      ----|   Proxy   |------[internet]------|   Server   |----
      |   +-----------+                      +------------+   |
      |                                                       |
+------------+                                         +--------------+
| Tor Client |                                         |  Tor Bridge  |
+------------+                                         +--------------+
    5000                                                     5001


